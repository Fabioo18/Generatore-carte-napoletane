<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generatore Carte Napoletane</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#560808">

<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  color: white;
  padding: 20px;
  background: url("static/sfondo.jpg") no-repeat center center fixed;
  background-size: cover;
}
h1,h2,h3,li { text-shadow:2px 2px 4px rgba(0,0,0,.7); }
button {
  padding:12px 25px;
  margin:8px;
  font-size:16px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background:linear-gradient(145deg,#ffcc33,#ff9900);
  color:white;
  font-weight:bold;
}
#cartaImg {
  width:200px;
  margin:20px 0;
  border-radius:10px;
  box-shadow:0 4px 10px rgba(0,0,0,.5);
}
.hidden { display:none; }
</style>
</head>

<body>

<h1>Generatore Carte Napoletane</h1>

<button onclick="pescaCarta()">Pesca una carta</button>
<button onclick="resetMazzo()">Reset Mazzo</button>
<button onclick="scaricaOffline()">ðŸ“¦ Scarica tutto offline</button>

<div>
  <img id="cartaImg" src="static/Carte_Napoletane_retro.jpg">
</div>

<h3 id="cartaNome">Mazzo pronto</h3>
<ul id="storico"></ul>

<script>
const carte = [
  {nome:"Asso di Denari", file:"01_Asso_di_denari.jpg", audio:"Asso_di_denari.mp3"},
  {nome:"Due di Denari", file:"02_Due_di_denari.jpg", audio:"Due_di_denari.mp3"},
  {nome:"Tre di Denari", file:"03_Tre_di_denari.jpg", audio:"Tre_di_denari.mp3"},
  {nome:"Quattro di Denari", file:"04_Quattro_di_denari.jpg", audio:"Quattro_di_denari.mp3"},
  {nome:"Cinque di Denari", file:"05_Cinque_di_denari.jpg", audio:"Cinque_di_denari.mp3"},
  {nome:"Sei di Denari", file:"06_Sei_di_denari.jpg", audio:"Sei_di_denari.mp3"},
  {nome:"Sette di Denari", file:"07_Sette_di_denari.jpg", audio:"Sette_di_denari.mp3"},
  {nome:"Otto di Denari", file:"08_Otto_di_denari.jpg", audio:"Otto_di_denari.mp3"},
  {nome:"Nove di Denari", file:"09_Nove_di_denari.jpg", audio:"Nove_di_denari.mp3"},
  {nome:"Dieci di Denari", file:"10_Dieci_di_denari.jpg", audio:"Dieci_di_denari.mp3"},
  {nome:"Asso di Coppe", file:"11_Asso_di_coppe.jpg", audio:"Asso_di_coppe.mp3"},
  {nome:"Due di Coppe", file:"12_Due_di_coppe.jpg", audio:"Due_di_coppe.mp3"},
  {nome:"Tre di Coppe", file:"13_Tre_di_coppe.jpg", audio:"Tre_di_coppe.mp3"},
  {nome:"Quattro di Coppe", file:"14_Quattro_di_coppe.jpg", audio:"Quattro_di_coppe.mp3"},
  {nome:"Cinque di Coppe", file:"15_Cinque_di_coppe.jpg", audio:"Cinque_di_coppe.mp3"},
  {nome:"Sei di Coppe", file:"16_Sei_di_coppe.jpg", audio:"Sei_di_coppe.mp3"},
  {nome:"Sette di Coppe", file:"17_Sette_di_coppe.jpg", audio:"Sette_di_coppe.mp3"},
  {nome:"Otto di Coppe", file:"18_Otto_di_coppe.jpg", audio:"Otto_di_coppe.mp3"},
  {nome:"Nove di Coppe", file:"19_Nove_di_coppe.jpg", audio:"Nove_di_coppe.mp3"},
  {nome:"Dieci di Coppe", file:"20_Dieci_di_coppe.jpg", audio:"Dieci_di_coppe.mp3"},
  {nome:"Asso di Spade", file:"21_Asso_di_spade.jpg", audio:"Asso_di_spade.mp3"},
  {nome:"Due di Spade", file:"22_Due_di_spade.jpg", audio:"Due_di_spade.mp3"},
  {nome:"Tre di Spade", file:"23_Tre_di_spade.jpg", audio:"Tre_di_spade.mp3"},
  {nome:"Quattro di Spade", file:"24_Quattro_di_spade.jpg", audio:"Quattro_di_spade.mp3"},
  {nome:"Cinque di Spade", file:"25_Cinque_di_spade.jpg", audio:"Cinque_di_spade.mp3"},
  {nome:"Sei di Spade", file:"26_Sei_di_spade.jpg", audio:"Sei_di_spade.mp3"},
  {nome:"Sette di Spade", file:"27_Sette_di_spade.jpg", audio:"Sette_di_spade.mp3"},
  {nome:"Otto di Spade", file:"28_Otto_di_spade.jpg", audio:"Otto_di_spade.mp3"},
  {nome:"Nove di Spade", file:"29_Nove_di_spade.jpg", audio:"Nove_di_spade.mp3"},
  {nome:"Dieci di Spade", file:"30_Dieci_di_spade.jpg", audio:"Dieci_di_spade.mp3"},
  {nome:"Asso di Bastoni", file:"31_Asso_di_bastoni.jpg", audio:"Asso_di_bastoni.mp3"},
  {nome:"Due di Bastoni", file:"32_Due_di_bastoni.jpg", audio:"Due_di_bastoni.mp3"},
  {nome:"Tre di Bastoni", file:"33_Tre_di_bastoni.jpg", audio:"Tre_di_bastoni.mp3"},
  {nome:"Quattro di Bastoni", file:"34_Quattro_di_bastoni.jpg", audio:"Quattro_di_bastoni.mp3"},
  {nome:"Cinque di Bastoni", file:"35_Cinque_di_bastoni.jpg", audio:"Cinque_di_bastoni.mp3"},
  {nome:"Sei di Bastoni", file:"36_Sei_di_bastoni.jpg", audio:"Sei_di_bastoni.mp3"},
  {nome:"Sette di Bastoni", file:"37_Sette_di_bastoni.jpg", audio:"Sette_di_bastoni.mp3"},
  {nome:"Otto di Bastoni", file:"38_Otto_di_bastoni.jpg", audio:"Otto_di_bastoni.mp3"},
  {nome:"Nove di Bastoni", file:"39_Nove_di_bastoni.jpg", audio:"Nove_di_bastoni.mp3"},
  {nome:"Dieci di Bastoni", file:"40_Dieci_di_bastoni.jpg", audio:"Dieci_di_bastoni.mp3"}
];

let mazzo=[...carte], storico=[], audio=null;

function pescaCarta(){
  if(!mazzo.length) return alert("Mazzo finito");
  const c=mazzo.splice(Math.random()*mazzo.length|0,1)[0];
  storico.push(c);
  cartaImg.src="static/"+c.file;
  cartaNome.textContent=c.nome;
  audio && audio.pause();
  audio=new Audio("static/"+c.audio);
  audio.play();
}

function resetMazzo(){ mazzo=[...carte]; }

async function scaricaOffline(){
  for(const c of carte){
    await fetch("static/"+c.file);
    await fetch("static/"+c.audio);
  }
  alert("âœ” Tutte le carte salvate offline");
}

if("serviceWorker"in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>
</body>
</html>
